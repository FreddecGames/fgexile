import{_ as B}from"./BGYvOMTI.js";import{u as S,h as E,j as c,c as n,a as s,t as a,i as t,F as v,k as x,l as L,m as T,n as b,v as w,q as y,b as u,w as k,s as $,d as g,r as U,o as l,f as D}from"./DLMJGIfJ.js";import{_ as F}from"./D-dbNWha.js";import{u as M}from"./ySABdzCc.js";const R={class:"d-flex align-items-center mx-auto mb-2 px-3 px-sm-0",style:{"max-width":"28rem"}},j=s("img",{src:F,width:"24",class:"me-2"},null,-1),H={class:"fs-5"},z={class:"align-self-end ms-auto fs-6"},A={class:"p-3 mb-3 bg-light"},G={class:"mx-auto",style:{"max-width":"28rem"}},I={class:"mb-3"},J={key:0,class:"alert alert-danger"},K={class:"mb-2"},O={for:"loginEmail",class:"form-label"},Q=["disabled"],W={class:"mb-3"},X={class:"row gx-2 align-items-center"},Y={class:"col"},Z={for:"loginPassword",class:"form-label"},ss={class:"col-auto small"},es={class:"input-group"},ts=["disabled"],os=["disabled"],ls=["disabled"],as={class:"row gx-2 align-items-center"},ns={class:"col"},is={class:"col-auto"},ds=["disabled"],rs={key:0},cs={key:1},us={class:"mx-auto text-center"},hs={__name:"login",setup(ms){S({title:"login_pageTitle"});const V=M(),P=E(),m=c(null),r=c(null),_=c(null),d=c(!1),p=c(!1);function C(){p.value=!p.value}async function N(){_.value=null,d.value=!0,await $fetch("https://ngexile.freddecgames.com/api/login/",{method:"post",body:{username:m.value,password:r.value}}).then(e=>{const o=D("token");o.value=e.key,V.authenticated=!0,P.push("/home")}).catch(e=>{console.log(e.data),_.value=e.data,d.value=!1})}return(e,o)=>{const h=B,f=U("font-awesome-icon");return l(),n(v,null,[s("div",R,[j,s("span",H,a(e.$t("site_name")),1),s("span",z,a(e.$t("login_title")),1)]),s("div",A,[s("div",G,[s("div",I,a(e.$t("login_text")),1),t(_)?(l(),n("div",J,[(l(!0),n(v,null,x(t(_),i=>(l(),n("div",null,[(l(!0),n(v,null,x(i,q=>(l(),n("div",null,a(q),1))),256))]))),256))])):L("",!0),s("form",{onSubmit:o[4]||(o[4]=T(i=>N(),["prevent"]))},[s("div",K,[s("label",O,a(e.$t("login_email")),1),b(s("input",{type:"email","onUpdate:modelValue":o[0]||(o[0]=i=>y(m)?m.value=i:null),class:"form-control",id:"loginEmail",disabled:t(d),required:"",autocomplete:"email"},null,8,Q),[[w,t(m)]])]),s("div",W,[s("div",X,[s("div",Y,[s("label",Z,a(e.$t("login_password")),1)]),s("div",ss,[u(h,{to:"/password-reset"},{default:k(()=>[g(a(e.$t("login_resetPassword")),1)]),_:1})])]),s("div",es,[t(p)?b((l(),n("input",{key:0,type:"text","onUpdate:modelValue":o[1]||(o[1]=i=>y(r)?r.value=i:null),class:"form-control",id:"loginPassword",disabled:t(d),required:"",minlength:"8",autocomplete:"current-password"},null,8,ts)),[[w,t(r)]]):b((l(),n("input",{key:1,type:"password","onUpdate:modelValue":o[2]||(o[2]=i=>y(r)?r.value=i:null),class:"form-control",id:"loginPassword",disabled:t(d),required:"",minlength:"8",autocomplete:"current-password"},null,8,os)),[[w,t(r)]]),s("button",{type:"button",class:"btn btn-outline-secondary",style:{"border-color":"#dee2e6"},disabled:t(d),onClick:o[3]||(o[3]=i=>C())},[t(p)?(l(),$(f,{key:0,icon:"fas fa-eye-slash","fixed-width":""})):(l(),$(f,{key:1,icon:"fas fa-eye","fixed-width":""}))],8,ls)])]),s("div",as,[s("div",ns,[u(h,{to:"/"},{default:k(()=>[u(f,{icon:"fas fa-arrow-left-long"}),g(" "+a(e.$t("login_back")),1)]),_:1})]),s("div",is,[s("button",{type:"submit",class:"w-100 btn btn-primary",disabled:t(d)},[t(d)?(l(),n("span",rs,[u(f,{icon:"fas fa-rotate",class:"rotate"})])):(l(),n("span",cs,a(e.$t("login_button")),1))],8,ds)])])],32)])]),s("div",us,[g(a(e.$t("login_register"))+" ",1),u(h,{to:"/register"},{default:k(()=>[g(a(e.$t("register_title")),1)]),_:1})])],64)}}};export{hs as default};
