import{_ as E}from"./BGYvOMTI.js";import{u as R,j as l,x as N,g as V,c as t,a as s,t as n,i as a,b as _,w as S,F as h,k as y,l as w,m as B,n as L,v as T,q,r as D,o,d as F}from"./DLMJGIfJ.js";import{_ as M}from"./D-dbNWha.js";const j={class:"d-flex align-items-center mx-auto mb-2 px-3 px-sm-0",style:{"max-width":"28rem"}},A=s("img",{src:M,width:"24",class:"me-2"},null,-1),H={class:"fs-5"},U={class:"align-self-end ms-auto fs-6"},z={key:0,class:"p-3 bg-light"},G={class:"mx-auto",style:{"max-width":"28rem"}},I={class:"alert alert-success"},J={class:"row gx-2 align-items-center"},K={class:"ms-auto col-4 col-lg-3"},O={key:1,class:"p-3 bg-light"},P={class:"mx-auto",style:{"max-width":"28rem"}},Q={key:0,class:"alert alert-danger"},W={key:1,class:"alert alert-success mb-0"},X={key:2,class:"alert alert-danger"},Y={class:"mb-3"},Z={for:"resendEmail",class:"form-label"},ee=["disabled"],se={class:"row gx-2 align-items-center"},te={class:"ms-auto col-auto"},oe=["disabled"],ae={key:0},ne={key:1},de={__name:"[token]",async setup(ie){let f,p;R({title:"registerConfirm_pageTitle"});const g=l(!1),v=l(!1),k=N();[f,p]=V(()=>$fetch("http://127.0.0.1:8000/auth/registration/verify-email/",{method:"post",body:{key:k.params.token}}).then(e=>{v.value=!0}).catch(e=>{console.log(e.data),g.value=!0})),await f,p();const r=l(null),c=l(null),u=l(!1),i=l(!1);async function x(){c.value=null,i.value=!0,await $fetch("http://127.0.0.1:8000/auth/registration/resend-email/",{method:"post",body:{email:r.value}}).then(e=>{u.value=!0,i.value=!1}).catch(e=>{console.log(e.data),c.value=e.data,i.value=!1})}return(e,d)=>{const b=D("font-awesome-icon"),$=E;return o(),t(h,null,[s("div",j,[A,s("span",H,n(e.$t("site_name")),1),s("span",U,n(e.$t("registerConfirm_title")),1)]),a(v)?(o(),t("div",z,[s("div",G,[s("div",I,n(e.$t("registerConfirm_success")),1),s("div",J,[s("div",K,[_($,{class:"w-100 btn btn-primary",to:"/login"},{default:S(()=>[_(b,{icon:"fas fa-right-to-bracket"}),F(" "+n(e.$t("login_title")),1)]),_:1})])])])])):(o(),t("div",O,[s("div",P,[a(c)?(o(),t("div",Q,[(o(!0),t(h,null,y(a(c),m=>(o(),t("div",null,[(o(!0),t(h,null,y(m,C=>(o(),t("div",null,n(C),1))),256))]))),256))])):a(u)?(o(),t("div",W,n(e.$t("registerResend_success")),1)):a(g)?(o(),t("div",X,n(e.$t("registerConfirm_error")),1)):w("",!0),a(u)?w("",!0):(o(),t("form",{key:3,onSubmit:d[1]||(d[1]=B(m=>x(),["prevent"]))},[s("div",Y,[s("label",Z,n(e.$t("registerResend_email")),1),L(s("input",{type:"email","onUpdate:modelValue":d[0]||(d[0]=m=>q(r)?r.value=m:null),class:"form-control",id:"resendEmail",disabled:a(i),required:"",autocomplete:"email"},null,8,ee),[[T,a(r)]])]),s("div",se,[s("div",te,[s("button",{type:"submit",class:"w-100 btn btn-primary",disabled:a(i)},[a(i)?(o(),t("span",ae,[_(b,{icon:"fas fa-rotate",class:"rotate"})])):(o(),t("span",ne,n(e.$t("registerResend_button")),1))],8,oe)])])],32))])]))],64)}}};export{de as default};
